<div class="bg-white rounded-4 p-4 shadow-lg text-center"
     style="backdrop-filter: blur(50px); width: 100%; max-width: 600px; color: black; background-color: rgba(255,255,255,0.8); overflow: hidden; padding-top: 40px; box-sizing: border-box; min-height: 420px;">

  <h1 class="archivo-black fw-bold fs-3 pt-2 mb-4">Tell us more about yourself</h1>

  <%= form_with url: onboarding_save_style_and_personality_path, method: :post, data: { turbo_frame: "onboarding_step" } do %>
    <div class="overflow-auto custom-scrollbar" style="max-height: 50vh;">
      <% categories = [
        { name: "I prefer to get around by...", subcategories: ["Walking", "Cycling", "E-Bike / Scooter", "Tram", "Bus", "Train", "Metro"] },
        { name: "In a day I can walk for...", subcategories: [">30mins", "30-60mins", "1-2hrs", "2-3hrs", "+3hrs"] },
        { name: "I wake up at...", subcategories: ["05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00"] },
        { name: "I go to bed at...", subcategories: ["19:00", "20:00", "21:00", "22:00", "23:00", "24:00", "01:00", "02:00", "No bed time"] },
        { name: "Special Requirements", subcategories: ["Wheelchair Accessible", "Pet Friendly", "Family Friendly", "LGBTQ+ Friendly", "Vegan", "Vegetarian", "Halal"] },
      ] %>

      <% categories.each_with_index do |category, cat_idx| %>
        <h5 class="archivo-black mt-3 mb-2"><%= category[:name] %></h5>
        <div class="d-flex flex-wrap gap-2 justify-content-center mb-4">
          <% category[:subcategories].each_with_index do |subcat, sub_idx| %>
            <% input_id = "subcat_#{cat_idx}_#{sub_idx}" %>
            <%= check_box_tag "subcategory_names[]", "#{category[:name]}:#{subcat}", false, class: "btn-check", id: input_id, autocomplete: "off" %>
            <%= label_tag input_id, subcat, class: "btn-outline-custom rounded-pill px-4 py-2 archivo fw-semibold" %>
          <% end %>
        </div>
      <% end %>
    </div>

    <div class="d-flex gap-3 justify-content-center mt-5 flex-wrap">
      <%= link_to "← Back", onboarding_sub_interests_path, data: { turbo_frame: "onboarding_step" }, class: "btn btn-light rounded-pill archivo", style: "flex: 1 1 120px; max-width: 150px; font-weight: 600; font-size: 18px; min-width: 120px;" %>
      <%= submit_tag "Finish →", class: "btn btn-secondary rounded-pill archivo", style: "flex: 1 1 120px; max-width: 150px; font-weight: 600; font-size: 18px; min-width: 120px;" %>
    </div>

    <div class="progress mt-4" style="height: 8px; border-radius: 4px;">
      <div class="progress-bar" style="width: 75%; background-color: #798645;"></div>
    </div>
  <% end %>

</div>
